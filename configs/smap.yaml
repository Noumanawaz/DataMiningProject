# Configuration for SMAP dataset

experiment:
  experiment_dir: ./experiments/smap_experiment
  name: smap_hybrid_model

data:
  dataset_name: smap
  data_dir: ./data/raw/SMAP
  window_size: 100
  train_stride: 1
  test_stride: 1
  anomaly_threshold: 0.5  # Window is anomalous if >50% of points are anomalous
  dataset_kwargs: {}

model:
  input_dim: 25 # SMAP has 25 channels
  d_model: 128
  nhead: 8
  num_encoder_layers: 4
  num_decoder_layers: 4
  dim_feedforward: 512
  dropout: 0.1
  max_len: 5000
  use_decoder: true

  # Contrastive head
  contrastive_hidden_dim: 256
  projection_dim: 128
  contrastive_layers: 2
  pooling: mean

  # GAN
  latent_dim: 64
  generator_hidden_dims: [256, 512, 256]
  discriminator_hidden_dims: [256, 512, 256, 128]
  use_spectral_norm: false

augmentation:
  temporal_mask_prob: 0.3
  channel_mask_prob: 0.2
  temporal_mask_ratio: 0.15
  channel_mask_ratio: 0.1
  use_time_warping: false
  time_warp_prob: 0.1
  time_warp_sigma: 0.2

loss:
  lambda_rec: 1.0
  lambda_con: 0.5
  lambda_gan: 0.1
  rec_loss_type: mse
  gan_type: lsgan
  contrastive_temperature: 0.07

training:
  batch_size: 32
  num_epochs: 25
  learning_rate: 0.001
  generator_lr: 0.0001
  discriminator_lr: 0.0001
  weight_decay: 0.00001
  lr_step_size: 50
  lr_gamma: 0.5
  num_workers: 0
  n_critic: 5
  use_wgan: false
  lambda_gp: 10.0
  save_interval: 10

evaluation:
  score_weights: [0.5, 0.3, 0.2] # [reconstruction, discriminator, contrastive]

